---
title: Organizing DataFest the tidy way
author: 'Mine Çetinkaya-Rundel'
date: '2017-04-05'
slug: 'DataFestOrg'
categories: [Education, Reproducibility, R Language]
tags: [R, R Markdown, Google Forms]
---


<p>Organizing an event can be a full-time task in and of its own. I have been organizing ASA DataFest for six years at Duke, and over this time, the number of participants has grown from 23 students from Duke only, to 360 students from seven area schools this year!</p>
<p>First, a bit about ASA DataFest: ASA DataFest is a data “hackathon” for students around the U.S., Canada, and Germany (for now; this list has been growing each year). Students spend a weekend working in small teams, around the clock, to find insight and meaning in a large, messy, and rich data set. For almost all students, it is the most complex data they have encountered, and they push themselves to master new skills, resurrect forgotten knowledge, and bring everything they’ve got to compete for the honor of being declared the best by a panel of expert judges.</p>
<p>As an educator, statistician, and data scientist, growth in student interest in this event sounds fantastic to me. However, as the person responsible for running the event at Duke, it has also meant that for the couple months leading up to DataFest, I have almost an additional full-time job dealing with everything from student registrations to promoting the event to putting in food orders. While I have not found an R-based solution for ordering food (yet!), this year I incorporated R and R Markdown in my organization workflow for grabbing, processing, and reporting registration information.</p>
<p>This post highlights using Google Forms for data collection (e.g., registration), the <code>googlesheets</code> package to pull that data into R, and packages from the tidyverse to manipulate, summarise, and visualize that data. Then, we use <a href="http://rpubs.com/">RPubs</a> for publishing documents to be shared with participants and other constituents.</p>
<p>Here is a list of all packages used in this article:</p>
<pre class="r"><code>library(googlesheets)
library(tidyverse)
library(stringr)
library(DT)
library(knitr)</code></pre>
<p>In an effort to make it easier for others organizing DataFests to replicate my workflow, I have created a Google Drive containing all forms needed for registering participants and collecting information from consultants (mentors), and judges. I have also populated these forms with randomly generated names to showcase how these data are processed to yield the rosters and reports that are useful for organizing the event and disseminating registration information. All Google Forms mentioned can be found in the <a href="https://drive.google.com/drive/u/1/folders/0B0Y2lFgS9uiDaEZvXzNGZ2xKNmM">DataFest Organization Google Drive</a>, which is available for public viewing. You can make a copy for your own use.</p>
<p>Additionally, all R scripts and R Markdown documents used to process these data are available on the <a href="https://github.com/mine-cetinkaya-rundel/datafest">datafest GitHub repo</a>.</p>
<div id="team-sign-ups" class="section level3">
<h3>Team sign ups</h3>
<p>If a group of students has already formed a team, it makes sense for them to sign up as a team to ensure that they use the same team name and that everyone registers at once. <a href="https://goo.gl/forms/0hXPw0Bj1zYhsfNP2">This Google Form</a> is used to sign such students up.</p>
<p>One issue with registering each team as a single entry is that we end up with what we call “wide” data: each row represents a team, and within that row we have information on all students in that team. However for most practical purposes (counting participants, plotting distributions of years and majors, figuring out how many of each size t-shirt to order, etc.) we need the data to be in “long” format, where each row represents a student.</p>
<p>To accomplish this transformation, we first read the data in using the <code>googlesheets</code> package:</p>
<pre class="r"><code>part_wide &lt;- gs_title(&quot;DataFest [YEAR] @ [HOST] - Team Sign up (Responses)&quot;) %&gt;%
  gs_read()</code></pre>
<p>Then, we realize that the variable names are a mess since they come directly from questions on the Google form!</p>
<pre class="r"><code>names(part_wide)</code></pre>
<pre><code>##  [1] &quot;timestamp&quot;       &quot;team_name&quot;       &quot;last_name_1&quot;    
##  [4] &quot;first_name_1&quot;    &quot;school_1&quot;        &quot;tshirt_size_1&quot;  
##  [7] &quot;class_year_1&quot;    &quot;major_1&quot;         &quot;email_1&quot;        
## [10] &quot;participation_1&quot; &quot;diet_1&quot;          &quot;last_name_2&quot;    
## [13] &quot;first_name_2&quot;    &quot;school_2&quot;        &quot;tshirt_size_2&quot;  
## [16] &quot;class_year_2&quot;    &quot;major_2&quot;         &quot;email_2&quot;        
## [19] &quot;participation_2&quot; &quot;diet_2&quot;          &quot;last_name_3&quot;    
## [22] &quot;first_name_3&quot;    &quot;school_3&quot;        &quot;tshirt_size_3&quot;  
## [25] &quot;class_year_3&quot;    &quot;major_3&quot;         &quot;email_3&quot;        
## [28] &quot;participation_3&quot; &quot;diet_3&quot;          &quot;last_name_4&quot;    
## [31] &quot;first_name_4&quot;    &quot;school_4&quot;        &quot;tshirt_size_4&quot;  
## [34] &quot;class_year_4&quot;    &quot;major_4&quot;         &quot;email_4&quot;        
## [37] &quot;participation_4&quot; &quot;diet_4&quot;          &quot;last_name_5&quot;    
## [40] &quot;first_name_5&quot;    &quot;school_5&quot;        &quot;tshirt_size_5&quot;  
## [43] &quot;class_year_5&quot;    &quot;major_5&quot;         &quot;email_5&quot;        
## [46] &quot;participation_5&quot; &quot;diet_5&quot;          &quot;photo&quot;</code></pre>
<p>Using <code>stringr</code>, we can get these variable names in concise snake_case shape:</p>
<pre class="r"><code>names(part_wide) &lt;- names(part_wide) %&gt;%
  str_replace(&quot; of team member&quot;, &quot;&quot;) %&gt;%
  str_replace(&quot; in DataFest before&quot;, &quot;&quot;) %&gt;%
  str_replace(&quot; Check all that apply.&quot;, &quot;&quot;) %&gt;%
  str_replace(&quot;Email address&quot;, &quot;email&quot;) %&gt;%
  str_replace(&quot;Dietary restrictions&quot;, &quot;diet&quot;) %&gt;%
  str_replace(&quot;Check if you agree&quot;, &quot;photo&quot;) %&gt;%
  str_replace(&quot;\\:&quot;, &quot;&quot;) %&gt;%
  str_replace(&quot;-&quot;, &quot;&quot;) %&gt;%
  str_replace_all(&quot; &quot;, &quot;_&quot;) %&gt;%
  tolower()</code></pre>
<p>We can see that things look a lot better now:</p>
<pre class="r"><code>names(part_wide)</code></pre>
<pre><code>##  [1] &quot;timestamp&quot;       &quot;team_name&quot;       &quot;last_name_1&quot;    
##  [4] &quot;first_name_1&quot;    &quot;school_1&quot;        &quot;tshirt_size_1&quot;  
##  [7] &quot;class_year_1&quot;    &quot;major_1&quot;         &quot;email_1&quot;        
## [10] &quot;participation_1&quot; &quot;diet_1&quot;          &quot;last_name_2&quot;    
## [13] &quot;first_name_2&quot;    &quot;school_2&quot;        &quot;tshirt_size_2&quot;  
## [16] &quot;class_year_2&quot;    &quot;major_2&quot;         &quot;email_2&quot;        
## [19] &quot;participation_2&quot; &quot;diet_2&quot;          &quot;last_name_3&quot;    
## [22] &quot;first_name_3&quot;    &quot;school_3&quot;        &quot;tshirt_size_3&quot;  
## [25] &quot;class_year_3&quot;    &quot;major_3&quot;         &quot;email_3&quot;        
## [28] &quot;participation_3&quot; &quot;diet_3&quot;          &quot;last_name_4&quot;    
## [31] &quot;first_name_4&quot;    &quot;school_4&quot;        &quot;tshirt_size_4&quot;  
## [34] &quot;class_year_4&quot;    &quot;major_4&quot;         &quot;email_4&quot;        
## [37] &quot;participation_4&quot; &quot;diet_4&quot;          &quot;last_name_5&quot;    
## [40] &quot;first_name_5&quot;    &quot;school_5&quot;        &quot;tshirt_size_5&quot;  
## [43] &quot;class_year_5&quot;    &quot;major_5&quot;         &quot;email_5&quot;        
## [46] &quot;participation_5&quot; &quot;diet_5&quot;          &quot;photo&quot;</code></pre>
<p>Finally, then we use <code>dplyr</code> and <code>tidyr</code> to transform the data from wide to long:</p>
<pre class="r"><code>participants &lt;- part_wide %&gt;%
  select(-photo) %&gt;%
  gather(column, entry, last_name_1:diet_5, -timestamp, -team_name) %&gt;%
  mutate(person_in_team = str_match(column, &quot;[0-9]&quot;)) %&gt;%
  mutate(column = str_replace(column, &quot;_[0-9]&quot;, &quot;&quot;)) %&gt;%
  spread(column, entry) %&gt;%
  filter(!is.na(last_name)) %&gt;%
  arrange(team_name, last_name, first_name) %&gt;%
  select(-person_in_team) %&gt;%
  select(timestamp, team_name, first_name, last_name, email, school, 
         class_year, major, participation, diet, tshirt_size)    # reorder</code></pre>
<p>Let’s take a peek:</p>
<pre class="r"><code>participants</code></pre>
<pre><code>## # A tibble: 16 x 11
##             timestamp          team_name first_name last_name
##                 &lt;chr&gt;              &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;
## 1   4/2/2017 22:20:05      Bae&#39;s Theorem   Adrienne    Fuller
## 2   4/2/2017 22:20:05      Bae&#39;s Theorem     Sylvia     Hicks
## 3   4/2/2017 22:20:05      Bae&#39;s Theorem       Toni   Simpson
## 4   4/2/2017 22:20:05      Bae&#39;s Theorem      Vicky     Water
## 5    4/4/2017 1:03:26      Bayes Anatomy   Meredith      Gray
## 6    4/4/2017 1:03:26      Bayes Anatomy      Derek  Shepherd
## 7   4/3/2017 16:14:00         Fake iid&#39;s    Carolyn      Byrd
## 8   4/3/2017 16:14:00         Fake iid&#39;s     Gordon   Hawkins
## 9   4/3/2017 16:14:00         Fake iid&#39;s    Cecilia   Pittman
## 10  4/3/2017 16:14:00         Fake iid&#39;s       Paul      Rios
## 11  4/3/2017 16:14:00         Fake iid&#39;s       Ryan      Rose
## 12 3/31/2017 23:55:00 Passive Regression     Amanda      Boyd
## 13 3/31/2017 23:55:00 Passive Regression       Rosa       Fox
## 14 3/31/2017 23:55:00 Passive Regression      Lucas  Gonzales
## 15  4/1/2017 20:14:05            The Pit      James   Andrews
## 16  4/1/2017 20:14:05            The Pit        Tom  Lawrence
## # ... with 7 more variables: email &lt;chr&gt;, school &lt;chr&gt;, class_year &lt;chr&gt;,
## #   major &lt;chr&gt;, participation &lt;chr&gt;, diet &lt;chr&gt;, tshirt_size &lt;chr&gt;</code></pre>
<p>We can now easily look for duplicates (sometimes students sign up twice or more times) or use these data to explore the various features of participants.</p>
</div>
<div id="individual-sign-ups" class="section level3">
<h3>Individual sign-ups</h3>
<p>If a student is wanting to participate in DataFest but they don’t have a team in mind, we ask them to fill out a brief survey where they answer questions about their background as well as how much time they are wanting to commit to DataFest, ranging from <em>“I’m in it to win it”</em> to <em>“I’m more interested in the experience, and am not really sure if I’ll submit a final presentation.”</em></p>
<p>Sometimes students find a team and register with that team after having filled out this survey. These students should be removed from the list of those looking for teammates, though there is no easy way for them to do so in Google Forms (they can’t go back and remove their response).</p>
<p>However we can easily do this with an <code>anti_join</code>. Suppose this data frame is called <code>looking</code>, and remember that the earlier data frame of students registering with teams was called <code>participants</code>.</p>
<pre class="r"><code>looking &lt;- anti_join(looking, participants, by = &quot;email&quot;)</code></pre>
<p>Then, the survey results are made available to the same students who are looking for teammates so that they can match up with others and form a team.</p>
<pre class="r"><code>looking %&gt;%
  select(first_name, last_name, participation_level, class_year, major, school, participation_before, email) %&gt;%
  arrange(participation_level, class_year, major, school) %&gt;%
  datatable()</code></pre>
<p>Here we make use of the <code>datatable</code> function in the <code>DT</code> package to display the list of students in a pretty and easily sortable and searchable format.</p>
</div>
<div id="consultants-and-judges" class="section level3">
<h3>Consultants and judges</h3>
<p>Using a similar approach we can also grab, organize, and report lists of consultants and judges. All relevant code for this can be found in the <a href="https://github.com/mine-cetinkaya-rundel/datafest">datafest GitHub repo</a>.</p>
</div>
<div id="participant-summary" class="section level3">
<h3>Participant summary</h3>
<p>Now that we have our participant data in a tidy format, we can visualize distributions of majors, years, previous participation etc.</p>
<p>For example, we can count how many teams are participating from each school:</p>
<pre class="r"><code>participants %&gt;%
  distinct(team_name, .keep_all = TRUE) %&gt;%
  count(school) %&gt;%
  arrange(desc(n))</code></pre>
<pre><code>## # A tibble: 3 x 2
##                    school     n
##                     &lt;chr&gt; &lt;int&gt;
## 1           Faber College     2
## 2 Port Chester University     2
## 3     Harrison University     1</code></pre>
<p>or visualize the distribution of class years per school:</p>
<pre class="r"><code>ggplot(data = participants, aes(x = school, fill = class_year)) +
  geom_bar(position = &quot;fill&quot;) +
  labs(title = &quot;Schools and class years&quot;)</code></pre>
<p><img src="/post/2017-04-04-organizing-datafest-the-tidy-way_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
</div>
<div id="information-guides" class="section level3">
<h3>Information guides</h3>
<p>We can also use R Markdown to create documents that are mostly text, that introduce the event to the participants, consultants, and judges. Then, summary statistics and visualizations of the participants can easily be included in these guides.</p>
<p>Sample guides for participants and consultants/judges can also be found on the <a href="https://github.com/mine-cetinkaya-rundel/datafest">GitHub repo</a>.</p>
<p>And finally, all of these can be published on RPubs. However, note that these documents will be publicly available.</p>
</div>
